<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network code documentation for my turn-based game: Welcome !</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Network code documentation for my turn-based game<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Welcome ! </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md0"></a>
Presentation</h2>
<p>Welcome to the documentation of my network code for my turn-based game. <br  />
 This project was carried out as part of an exercise for SAE Institute Geneva during the Computer Network module of the Game Programming course.</p>
<p>I've created this little API based on TCP sockets from the SFML-Network library.<br  />
 My API provides two network managers, one for the client and one for the server (<a class="el" href="class_client_network_manager.html" title="ClientNetworkManager is the implementation of the ClientNetworkInterface. It manages the communicatio...">ClientNetworkManager</a> &amp; <a class="el" href="class_server_network_manager.html" title="ServerNetworkManager is an implementation of the NetworkInterface which manages network communication...">ServerNetworkManager</a>), inheriting interfaces so they can be easily mocked. <br  />
 The same principle applies to the <a class="el" href="class_http_manager.html" title="HttpManager is an implementation of the HttpInterface which enable to send Http GET and POST requests...">HttpManager</a> class, which enables HTTP GET and POST requests.</p>
<p>This page contains examples and explanations of the various API classes. Feel free to have a look before downloading my project.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Installation</h2>
<p>To start using my network code, I encourage you to build my game project to see how it's implemented and used in the game code, and also to see the CMake environment variables: Here the steps to build my project:</p>
<p>Requierements :</p><ul>
<li>Git installed</li>
<li>CMake installed</li>
<li>Vcpkg installed</li>
<li>Visual Studio 17 2022 installed</li>
</ul>
<p>Build steps:</p><ol type="1">
<li>Git clone my turn-based game repository: <a href="https://github.com/Chocolive24/network_turn_based_game.git">https://github.com/Chocolive24/network_turn_based_game.git</a></li>
<li>Go to the project root and run this cmake command (or use CMake GUI): <div class="fragment"><div class="line">cmake -S . -B &lt;build_directory_name&gt; -DCMAKE_BUILD_TYPE=Release -DPORT=&quot;&lt;a port number greater than 1024&gt;&quot;-DHOST_NAME=&quot;&lt;an IP adress&gt;&quot;</div>
<div class="line"> </div>
<div class="line">-DCMAKE_TOOLCHAIN_FILE=&lt;path_to_your_vcpkg_directory&gt;/scripts/buildsystems/vcpkg.cmake -G &quot;Visual Studio 17 2022&quot;</div>
</div><!-- fragment --></li>
<li>Then run this command: <div class="fragment"><div class="line">cmake --build &lt;build_directory_name&gt;</div>
</div><!-- fragment --></li>
<li>Go to the build directory and open the turn_based_game.sln solution file.</li>
</ol>
<p>If you want to reuse my network classes, just copy the network directoy and link it to your project.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Packet types</h2>
<p>The basis of my network code is an enum called PacketType, which differentiates the different packets and allows correct interaction with each of them.</p>
<p>PacketType:</p>
<ul>
<li>kNone</li>
<li>kClientIdentification,</li>
<li>kJoinLobby,</li>
<li>KStartGame,</li>
<li>kNewTurn,</li>
<li>KCueBallVelocity,</li>
<li>kEndGame,</li>
<li>kEloUpdated,</li>
</ul>
<p>You can create any type of packet you like for your application.<br  />
 The first piece of data contained in a packet is always a PacketType so that the way in which the rest of the packet's data is read can be adapted. <br  />
 Here is a small example in pseudo-code for sending a packet: </p><div class="fragment"><div class="line">sf::Packet my_packet{};</div>
<div class="line">my_packet &lt;&lt; <a class="code hl_enumeration" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23c">PacketType</a> &lt;&lt; any_type_of_data;</div>
<div class="line">client_network_interface_-&gt;SendPacket(my_packet);</div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23c"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23c">PacketType</a></div><div class="ttdeci">PacketType</div><div class="ttdef"><b>Definition</b> packet.h:7</div></div>
</div><!-- fragment --><p>And here is a small example in pseudo-code for receiving and decoding a packet: </p><div class="fragment"><div class="line">sf::Packet received_packet;</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> packet_type = client_network_interface_-&gt;ReceivePacket(received_packet);</div>
<div class="line"><span class="keywordflow">switch</span> (packet_type) {</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13">PacketType::kNone</a>:</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Packet received has no type. \n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8">PacketType::kJoinLobby</a>:</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca56429d2ac912e93dcddd7034259f0d22">PacketType::kClientIdentification</a>: </div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca26c042498f6ecfd9c8cf16226f71392f">PacketType::kEloUpdated</a>:</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca9a88da4d70e1fdf7a3ad9cee2fd808db">PacketType::KStartGame</a>:</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cafd506f933960a0db870ce1e136233042">PacketType::kNewTurn</a>:</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cad76fd330bb2961e616d7bcfec09031e4">PacketType::KCueBallVelocity</a>:</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca84e433ab4609f1c798e455b2523c2a98">PacketType::kEndGame</a>:</div>
<div class="line">    <span class="comment">// Do what whatever you need to do</span></div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line">  <span class="keywordflow">default</span>:</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23ca26c042498f6ecfd9c8cf16226f71392f"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca26c042498f6ecfd9c8cf16226f71392f">PacketType::kEloUpdated</a></div><div class="ttdeci">@ kEloUpdated</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13">PacketType::kNone</a></div><div class="ttdeci">@ kNone</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23ca56429d2ac912e93dcddd7034259f0d22"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca56429d2ac912e93dcddd7034259f0d22">PacketType::kClientIdentification</a></div><div class="ttdeci">@ kClientIdentification</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23ca84e433ab4609f1c798e455b2523c2a98"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca84e433ab4609f1c798e455b2523c2a98">PacketType::kEndGame</a></div><div class="ttdeci">@ kEndGame</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23ca9a88da4d70e1fdf7a3ad9cee2fd808db"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca9a88da4d70e1fdf7a3ad9cee2fd808db">PacketType::KStartGame</a></div><div class="ttdeci">@ KStartGame</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8">PacketType::kJoinLobby</a></div><div class="ttdeci">@ kJoinLobby</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23cad76fd330bb2961e616d7bcfec09031e4"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cad76fd330bb2961e616d7bcfec09031e4">PacketType::KCueBallVelocity</a></div><div class="ttdeci">@ KCueBallVelocity</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23cafd506f933960a0db870ce1e136233042"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cafd506f933960a0db870ce1e136233042">PacketType::kNewTurn</a></div><div class="ttdeci">@ kNewTurn</div></div>
</div><!-- fragment --><p> These examples don't use the <a class="el" href="class_client_network_manager.html" title="ClientNetworkManager is the implementation of the ClientNetworkInterface. It manages the communicatio...">ClientNetworkManager</a> class directly but rather a pointer to a <a class="el" href="class_client_network_interface.html" title="ClientNetworkInterface is an interface to communicates with a server.">ClientNetworkInterface</a> for more flexibility and to have the ability to mock up the interface (to test your app withotu network for example). <br  />
 Of course, you can also use the <a class="el" href="class_client_network_manager.html" title="ClientNetworkManager is the implementation of the ClientNetworkInterface. It manages the communicatio...">ClientNetworkManager</a> class directly.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
ClientPacket</h2>
<p><a class="el" href="struct_client_packet.html" title="ClientPacket is an object containing data that a client wishes to send to the server and its remote p...">ClientPacket</a> is an object containing data that a client wishes to send to the server and its remote port. This struct must be used in the server side only to be able to know which client has sent a packet.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Types</h2>
<p>Here's a collection of useful types and typedefs used by the API.</p>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> <a class="code hl_enumeration" href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54">ReturnStatus</a> : std::int8_t {</div>
<div class="line">  <a class="code hl_enumvalue" href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a8c632159fa131f09d04f94e3cbcd8782">kSuccess</a> = 0,</div>
<div class="line">  <a class="code hl_enumvalue" href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a45d5f642bcbee805302334d856c54259">kFailure</a> = 1</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="struct_player_data.html">PlayerData</a> {</div>
<div class="line">  std::string <a class="code hl_variable" href="struct_player_data.html#a86d067207bfc7797a9d8eee0ff711422">username</a>;</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_player_data.html#ace3e6f83be4f7f140de12af7f6ef6024">elo</a>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="types_8h.html#a7ae0c52260bc98d5cb0dde88976e1cac">Port</a> = std::uint16_t;</div>
<div class="ttc" id="astruct_player_data_html"><div class="ttname"><a href="struct_player_data.html">PlayerData</a></div><div class="ttdoc">PlayerData is a struct containing the username of a player and its elo.</div><div class="ttdef"><b>Definition</b> types.h:14</div></div>
<div class="ttc" id="astruct_player_data_html_a86d067207bfc7797a9d8eee0ff711422"><div class="ttname"><a href="struct_player_data.html#a86d067207bfc7797a9d8eee0ff711422">PlayerData::username</a></div><div class="ttdeci">std::string username</div><div class="ttdef"><b>Definition</b> types.h:15</div></div>
<div class="ttc" id="astruct_player_data_html_ace3e6f83be4f7f140de12af7f6ef6024"><div class="ttname"><a href="struct_player_data.html#ace3e6f83be4f7f140de12af7f6ef6024">PlayerData::elo</a></div><div class="ttdeci">int elo</div><div class="ttdef"><b>Definition</b> types.h:16</div></div>
<div class="ttc" id="atypes_8h_html_a7ae0c52260bc98d5cb0dde88976e1cac"><div class="ttname"><a href="types_8h.html#a7ae0c52260bc98d5cb0dde88976e1cac">Port</a></div><div class="ttdeci">std::uint16_t Port</div><div class="ttdef"><b>Definition</b> types.h:19</div></div>
<div class="ttc" id="atypes_8h_html_aa56ffd40edd0386c8b69e8b453cd6c54"><div class="ttname"><a href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54">ReturnStatus</a></div><div class="ttdeci">ReturnStatus</div><div class="ttdef"><b>Definition</b> types.h:6</div></div>
<div class="ttc" id="atypes_8h_html_aa56ffd40edd0386c8b69e8b453cd6c54a45d5f642bcbee805302334d856c54259"><div class="ttname"><a href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a45d5f642bcbee805302334d856c54259">ReturnStatus::kFailure</a></div><div class="ttdeci">@ kFailure</div></div>
<div class="ttc" id="atypes_8h_html_aa56ffd40edd0386c8b69e8b453cd6c54a8c632159fa131f09d04f94e3cbcd8782"><div class="ttname"><a href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a8c632159fa131f09d04f94e3cbcd8782">ReturnStatus::kSuccess</a></div><div class="ttdeci">@ kSuccess</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
ClientNetworkManager</h2>
<p><a class="el" href="class_client_network_manager.html" title="ClientNetworkManager is the implementation of the ClientNetworkInterface. It manages the communicatio...">ClientNetworkManager</a> is an implementation of the <a class="el" href="class_client_network_interface.html" title="ClientNetworkInterface is an interface to communicates with a server.">ClientNetworkInterface</a> using a sf::TcpSocket to communicates to the server on the network. Here's a short example of how to use this class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="client__network__manager_8h.html">client_network_manager.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code hl_class" href="class_client_network_manager.html">ClientNetworkManager</a> client;</div>
<div class="line">  <span class="keywordflow">if</span> (client.<a class="code hl_function" href="class_client_network_manager.html#a907df42edd7082958c22931b479cb003">ConnectToServer</a>(HOST_NAME, PORT, <span class="keyword">false</span>)</div>
<div class="line">      == <a class="code hl_enumvalue" href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a45d5f642bcbee805302334d856c54259">ReturnStatus::kFailure</a>){</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Could not connect to server.\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Connected to the server.\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a join lobby packet and send it to the server.</span></div>
<div class="line">  sf::Packet join_lobby_packet;</div>
<div class="line">  join_lobby_packet &lt;&lt; <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8">PacketType::kJoinLobby</a> &lt;&lt; any_data_you_want_to_send;</div>
<div class="line">  client.<a class="code hl_function" href="class_client_network_manager.html#a9477e1b07ec494e54b377bb44d00be54">SendPacket</a>(join_lobby_packet);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">bool</span> is_running = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span>(is_running) {</div>
<div class="line">    <span class="comment">// Check for received packets.</span></div>
<div class="line">    sf::Packet received_packet;</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> packet_type = client.<a class="code hl_function" href="class_client_network_manager.html#a3bad3bb03869baa797458dcd3ed04347">ReceivePacket</a>(received_packet);</div>
<div class="line">    <span class="keywordflow">switch</span> (packet_type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13">PacketType::kNone</a>:</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Packet received has no type. \n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8">PacketType::kJoinLobby</a>:</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;Client successfuly joinded a lobby.\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca56429d2ac912e93dcddd7034259f0d22">PacketType::kClientIdentification</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca26c042498f6ecfd9c8cf16226f71392f">PacketType::kEloUpdated</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca9a88da4d70e1fdf7a3ad9cee2fd808db">PacketType::KStartGame</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cafd506f933960a0db870ce1e136233042">PacketType::kNewTurn</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cad76fd330bb2961e616d7bcfec09031e4">PacketType::KCueBallVelocity</a>:</div>
<div class="line">            <span class="comment">// TODO: Handle packet receive as you wish.</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca84e433ab4609f1c798e455b2523c2a98">PacketType::kEndGame</a>:</div>
<div class="line">            is_running = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;  </div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  client.<a class="code hl_function" href="class_client_network_manager.html#a8f19871c5a6781656c59a2154dd90b5e">DisconnectFromServer</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_client_network_manager_html"><div class="ttname"><a href="class_client_network_manager.html">ClientNetworkManager</a></div><div class="ttdoc">ClientNetworkManager is the implementation of the ClientNetworkInterface. It manages the communicatio...</div><div class="ttdef"><b>Definition</b> client_network_manager.h:12</div></div>
<div class="ttc" id="aclass_client_network_manager_html_a3bad3bb03869baa797458dcd3ed04347"><div class="ttname"><a href="class_client_network_manager.html#a3bad3bb03869baa797458dcd3ed04347">ClientNetworkManager::ReceivePacket</a></div><div class="ttdeci">PacketType ReceivePacket(sf::Packet &amp;packet) noexcept override</div></div>
<div class="ttc" id="aclass_client_network_manager_html_a8f19871c5a6781656c59a2154dd90b5e"><div class="ttname"><a href="class_client_network_manager.html#a8f19871c5a6781656c59a2154dd90b5e">ClientNetworkManager::DisconnectFromServer</a></div><div class="ttdeci">void DisconnectFromServer() noexcept</div></div>
<div class="ttc" id="aclass_client_network_manager_html_a907df42edd7082958c22931b479cb003"><div class="ttname"><a href="class_client_network_manager.html#a907df42edd7082958c22931b479cb003">ClientNetworkManager::ConnectToServer</a></div><div class="ttdeci">ReturnStatus ConnectToServer(const sf::IpAddress &amp;remote_address, unsigned short remote_port, bool blocking=true) noexcept</div></div>
<div class="ttc" id="aclass_client_network_manager_html_a9477e1b07ec494e54b377bb44d00be54"><div class="ttname"><a href="class_client_network_manager.html#a9477e1b07ec494e54b377bb44d00be54">ClientNetworkManager::SendPacket</a></div><div class="ttdeci">void SendPacket(sf::Packet &amp;packet) noexcept override</div></div>
<div class="ttc" id="aclient__network__manager_8h_html"><div class="ttname"><a href="client__network__manager_8h.html">client_network_manager.h</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
ServerNetworkManager</h2>
<p><a class="el" href="class_server_network_manager.html" title="ServerNetworkManager is an implementation of the NetworkInterface which manages network communication...">ServerNetworkManager</a> is an implementation of the <a class="el" href="class_server_network_interface.html" title="ServerNetworkInterface is an interface to communicates with multiple clients.">ServerNetworkInterface</a> using a sf::TcpSocket per client with a sf::SocketSelector and a sf::TcpListener to handle communications between all clients connected to the server. The client's socket are stored in an array of unique_ptr of sf::TcpSocket. <br  />
 To receive network events from customers, you need to create two functions and give them as callbacks to the <a class="el" href="class_server_network_manager.html" title="ServerNetworkManager is an implementation of the NetworkInterface which manages network communication...">ServerNetworkManager</a>. The first callback occurs when a client has sent a packet. <br  />
 The second callback occurs when a client disconnects from the server.<br  />
 The PollEvents() method handle the client connections and detects which client send a packet based on its port number.<br  />
 Here's a short example of how to use this class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="server__network__manager_8h.html">server_network_manager.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Function callbacks declaration.</span></div>
<div class="line"><span class="comment">// ===============================</span></div>
<div class="line"><span class="keywordtype">void</span> OnPacketReceived(<a class="code hl_struct" href="struct_client_packet.html">ClientPacket</a>* client_packet) <span class="keyword">noexcept</span>;</div>
<div class="line"><span class="keywordtype">void</span> OnClientDisconnection(<span class="keyword">const</span> <a class="code hl_typedef" href="types_8h.html#a7ae0c52260bc98d5cb0dde88976e1cac">Port</a> client_port) <span class="keyword">noexcept</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code hl_class" href="class_server_network_manager.html">ServerNetworkManager</a> server_network_manager{};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="keywordflow">if</span> (server_network_manager.ListenToPort(PORT) == <a class="code hl_enumvalue" href="types_8h.html#aa56ffd40edd0386c8b69e8b453cd6c54a45d5f642bcbee805302334d856c54259">ReturnStatus::kFailure</a>) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Could not listen to port: &quot;</span> &lt;&lt; PORT &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Server is listening to port: &quot;</span> &lt;&lt; PORT &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Register callbacks using lambdas.</span></div>
<div class="line">    <span class="comment">// ===================</span></div>
<div class="line">    server_network_manager.<a class="code hl_function" href="class_server_network_interface.html#a7faace0a69e995fb47c8cf2ec2ef3bb7">RegisterPacketReceivedCallback</a>(</div>
<div class="line">        [](<a class="code hl_struct" href="struct_client_packet.html">ClientPacket</a>* client_packet) {</div>
<div class="line">        OnPacketReceived(client_packet);</div>
<div class="line">    }</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    server_network_manager.RegisterClientDisconnectionCallback(</div>
<div class="line">        [](<span class="keyword">const</span> <a class="code hl_typedef" href="types_8h.html#a7ae0c52260bc98d5cb0dde88976e1cac">Port</a> client_port) {</div>
<div class="line">        OnClientDisconnection(client_port);</div>
<div class="line">    }</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>){</div>
<div class="line">        server_network_manager.PollEvents();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCES;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> OnPacketReceived(<a class="code hl_struct" href="struct_client_packet.html">ClientPacket</a>* client_packet) <span class="keyword">noexcept</span> {</div>
<div class="line">  <a class="code hl_enumeration" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23c">PacketType</a> packet_type = <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13">PacketType::kNone</a>;</div>
<div class="line">  client_packet-&gt;<a class="code hl_variable" href="struct_client_packet.html#a4d50e5667c39ff939df803d3fae02e3c">data</a> &gt;&gt; packet_type;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (packet_type) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca35c3ace1970663a16e5c65baa5941b13">PacketType::kNone</a>:</div>
<div class="line">      std::cerr &lt;&lt; <span class="stringliteral">&quot;Packet received has no type. \n&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cab475a89f229c49cb5d492b3c11f825b5">PacketType::KNotReady</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca9a88da4d70e1fdf7a3ad9cee2fd808db">PacketType::KStartGame</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca26c042498f6ecfd9c8cf16226f71392f">PacketType::kEloUpdated</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cac5cd9a9b89ab0783db7a297d3f9dfff8">PacketType::kJoinLobby</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cafd506f933960a0db870ce1e136233042">PacketType::kNewTurn</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cad76fd330bb2961e616d7bcfec09031e4">PacketType::KCueBallVelocity</a>: </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca56429d2ac912e93dcddd7034259f0d22">PacketType::kClientIdentification</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="packet_8h.html#a8d045dc610cece93c3e138a11435d23ca84e433ab4609f1c798e455b2523c2a98">PacketType::kEndGame</a>: </div>
<div class="line">      <span class="comment">// TODO: Handle packet receive as you wish. </span></div>
<div class="line">      <span class="comment">// Here we simply send back the packet to the client like an echo server.</span></div>
<div class="line">      server_network_manager.SendPacket(client_packet-&gt;<a class="code hl_variable" href="struct_client_packet.html#a4d50e5667c39ff939df803d3fae02e3c">data</a>, client_packet-&gt;<a class="code hl_variable" href="struct_client_packet.html#abd432e02c2d102ead04aaadb69ecea60">client_port</a>)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> OnClientDisconnection(<span class="keyword">const</span> <a class="code hl_typedef" href="types_8h.html#a7ae0c52260bc98d5cb0dde88976e1cac">Port</a> client_port) <span class="keyword">noexcept</span> {</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Client on port: &quot;</span> &lt;&lt; client_port &lt;&lt; <span class="stringliteral">&quot; has disconnected from server.\n&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_server_network_interface_html_a7faace0a69e995fb47c8cf2ec2ef3bb7"><div class="ttname"><a href="class_server_network_interface.html#a7faace0a69e995fb47c8cf2ec2ef3bb7">ServerNetworkInterface::RegisterPacketReceivedCallback</a></div><div class="ttdeci">void RegisterPacketReceivedCallback(const std::function&lt; void(ClientPacket *client_packet)&gt; &amp;callback)</div><div class="ttdef"><b>Definition</b> server_network_interface.h:33</div></div>
<div class="ttc" id="aclass_server_network_manager_html"><div class="ttname"><a href="class_server_network_manager.html">ServerNetworkManager</a></div><div class="ttdoc">ServerNetworkManager is an implementation of the NetworkInterface which manages network communication...</div><div class="ttdef"><b>Definition</b> server_network_manager.h:16</div></div>
<div class="ttc" id="apacket_8h_html_a8d045dc610cece93c3e138a11435d23cab475a89f229c49cb5d492b3c11f825b5"><div class="ttname"><a href="packet_8h.html#a8d045dc610cece93c3e138a11435d23cab475a89f229c49cb5d492b3c11f825b5">PacketType::KNotReady</a></div><div class="ttdeci">@ KNotReady</div></div>
<div class="ttc" id="aserver__network__manager_8h_html"><div class="ttname"><a href="server__network__manager_8h.html">server_network_manager.h</a></div></div>
<div class="ttc" id="astruct_client_packet_html"><div class="ttname"><a href="struct_client_packet.html">ClientPacket</a></div><div class="ttdoc">ClientPacket is an object containing data that a client wishes to send to the server and its remote p...</div><div class="ttdef"><b>Definition</b> packet.h:24</div></div>
<div class="ttc" id="astruct_client_packet_html_a4d50e5667c39ff939df803d3fae02e3c"><div class="ttname"><a href="struct_client_packet.html#a4d50e5667c39ff939df803d3fae02e3c">ClientPacket::data</a></div><div class="ttdeci">sf::Packet data</div><div class="ttdef"><b>Definition</b> packet.h:25</div></div>
<div class="ttc" id="astruct_client_packet_html_abd432e02c2d102ead04aaadb69ecea60"><div class="ttname"><a href="struct_client_packet.html#abd432e02c2d102ead04aaadb69ecea60">ClientPacket::client_port</a></div><div class="ttdeci">Port client_port</div><div class="ttdef"><b>Definition</b> packet.h:26</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
HttpManager</h2>
<p><a class="el" href="class_http_manager.html" title="HttpManager is an implementation of the HttpInterface which enable to send Http GET and POST requests...">HttpManager</a> is an implementation of the <a class="el" href="class_http_interface.html" title="HttpInterface is an interface to perform GET and POST requests via the HTTP protocol....">HttpInterface</a> which enable to send Http GET and POST requests with a string that can be a json body using a sf::Http object. Here's a short example of how to use this class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="http__manager_8h.html">http_manager.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code hl_class" href="class_http_manager.html">HttpManager</a> http_manager{};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Bind http_manager to localhost.</span></div>
<div class="line">    http_manager.<a class="code hl_function" href="class_http_manager.html#a34e95756dc5be9e636b5ae948130f861">RegisterHostAndPort</a>(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8000);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Replace the uri by the one of your HTTP page.</span></div>
<div class="line">    <span class="keyword">const</span> std::string uri = <span class="stringliteral">&quot;/hello&quot;</span>;</div>
<div class="line">    <span class="keyword">const</span> std::string response = http_manager.Get(uri);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (response.empty()){</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Could not Get an answer.\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        std::cout &lt;&lt; response &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::string uri = <span class="stringliteral">&quot;/hello/message_place&quot;</span>;</div>
<div class="line">    <span class="keyword">const</span> std::string message_body = <span class="stringliteral">&quot;My message&quot;</span>;</div>
<div class="line">    http_manager.Post(uri, message_body);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCES;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_http_manager_html"><div class="ttname"><a href="class_http_manager.html">HttpManager</a></div><div class="ttdoc">HttpManager is an implementation of the HttpInterface which enable to send Http GET and POST requests...</div><div class="ttdef"><b>Definition</b> http_manager.h:9</div></div>
<div class="ttc" id="aclass_http_manager_html_a34e95756dc5be9e636b5ae948130f861"><div class="ttname"><a href="class_http_manager.html#a34e95756dc5be9e636b5ae948130f861">HttpManager::RegisterHostAndPort</a></div><div class="ttdeci">void RegisterHostAndPort(std::string_view host, Port port) noexcept override</div></div>
<div class="ttc" id="ahttp__manager_8h_html"><div class="ttname"><a href="http__manager_8h.html">http_manager.h</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Lobby</h2>
<p>The <a class="el" href="class_lobby.html" title="Lobby is a class which provides a simple, naive way of differentiating between the different clients ...">Lobby</a> class provides a simple, naive way of differentiating between the different clients connected to the server.<br  />
 It uses a struct called <a class="el" href="struct_client_data.html" title="ClientData is a struct which contains the username of a client and its port number....">ClientData</a> containing a client's username and port number to simplify packet communications between two players in a game. <br  />
</p>
<p>The class provides three methods:</p><ul>
<li>IsComplete() Returns true if the lobby is complete.</li>
<li>AddClient(const ClientData&amp; client_data) Adds a client to the lobby via the <a class="el" href="struct_client_data.html" title="ClientData is a struct which contains the username of a client and its port number....">ClientData</a> type.</li>
<li>Clear() Removes all clients from the lobby. The lobby is now ready to be reused. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
